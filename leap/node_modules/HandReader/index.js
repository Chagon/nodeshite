var EventEmitter = require('events').EventEmitter;

function HandReader() {
    var that = this;
    EventEmitter.call(this);

    require('../leapjs/template/entry.js');
    var controller = new Leap.Controller();

    var controllerOptions = { enableGestures: true };

    Leap.loop(controllerOptions, function(frame) {
        if (frame.hands.length === 1) {
            var roll = frame.hands[0].roll();
            var pitch = frame.hands[0].pitch();
            var yaw = frame.hands[0].yaw();
            var position = frame.hands[0].palmPosition;

            position.add(roll, pitch, yaw);

            that.emit('report', position);
        }
    });

    controller.connect();
}

HandReader.prototype.__proto__ = EventEmitter.prototype;

module.exports = HandReader;
